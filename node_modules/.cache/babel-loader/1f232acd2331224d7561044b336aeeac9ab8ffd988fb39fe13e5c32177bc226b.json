{"ast":null,"code":"import React,{useState,useEffect}from'react';import{db}from'../firebase/config';import{collection,query,orderBy,onSnapshot,deleteDoc,doc}from'firebase/firestore';import{useAuth}from'../contexts/AuthContext';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookList(){const[books,setBooks]=useState([]);const[loading,setLoading]=useState(true);const{userRole}=useAuth();useEffect(()=>{const q=query(collection(db,'books'),orderBy('createdAt','desc'));const unsubscribe=onSnapshot(q,querySnapshot=>{const booksData=querySnapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setBooks(booksData);setLoading(false);});return()=>unsubscribe();},[]);const handleDelete=async bookId=>{if(window.confirm('Bu kitabı silmek istediğinizden emin misiniz?')){try{await deleteDoc(doc(db,'books',bookId));toast.success('Kitap başarıyla silindi!');}catch(error){toast.error('Kitap silinirken bir hata oluştu: '+error.message);}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Y\\xFCkleniyor...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\",children:books.map(book=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:book.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[\"Yazar: \",book.author]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[\"ISBN: \",book.isbn]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[\"Hedef Kitle: \",{'children':'Çocuklar','young-adult':'Genç Yetişkinler','adult':'Yetişkinler'}[book.targetAudience]]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-700\",children:book.description}),userRole==='admin'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(book.id),className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",children:\"Sil\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* TODO: Implement edit functionality */},className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"D\\xFCzenle\"})]})]})},book.id))});}","map":{"version":3,"names":["React","useState","useEffect","db","collection","query","orderBy","onSnapshot","deleteDoc","doc","useAuth","toast","jsx","_jsx","jsxs","_jsxs","BookList","books","setBooks","loading","setLoading","userRole","q","unsubscribe","querySnapshot","booksData","docs","map","id","data","handleDelete","bookId","window","confirm","success","error","message","children","className","book","title","author","isbn","targetAudience","description","onClick"],"sources":["C:/Users/birde/OneDrive/Desktop/bookadvisor-reactweb/src/components/BookList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db } from '../firebase/config';\r\nimport { collection, query, orderBy, onSnapshot, deleteDoc, doc } from 'firebase/firestore';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport default function BookList() {\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const { userRole } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const q = query(collection(db, 'books'), orderBy('createdAt', 'desc'));\r\n    \r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const booksData = querySnapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      }));\r\n      setBooks(booksData);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleDelete = async (bookId) => {\r\n    if (window.confirm('Bu kitabı silmek istediğinizden emin misiniz?')) {\r\n      try {\r\n        await deleteDoc(doc(db, 'books', bookId));\r\n        toast.success('Kitap başarıyla silindi!');\r\n      } catch (error) {\r\n        toast.error('Kitap silinirken bir hata oluştu: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Yükleniyor...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n      {books.map((book) => (\r\n        <div key={book.id} className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n          <div className=\"px-4 py-5 sm:p-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900\">{book.title}</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Yazar: {book.author}</p>\r\n            <p className=\"mt-1 text-sm text-gray-500\">ISBN: {book.isbn}</p>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              Hedef Kitle: {\r\n                {\r\n                  'children': 'Çocuklar',\r\n                  'young-adult': 'Genç Yetişkinler',\r\n                  'adult': 'Yetişkinler'\r\n                }[book.targetAudience]\r\n              }\r\n            </p>\r\n            <p className=\"mt-2 text-sm text-gray-700\">{book.description}</p>\r\n            \r\n            {userRole === 'admin' && (\r\n              <div className=\"mt-4 flex space-x-2\">\r\n                <button\r\n                  onClick={() => handleDelete(book.id)}\r\n                  className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\r\n                >\r\n                  Sil\r\n                </button>\r\n                <button\r\n                  onClick={() => {/* TODO: Implement edit functionality */}}\r\n                  className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                >\r\n                  Düzenle\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}